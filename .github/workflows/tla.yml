name: TLA

on:
  push:
    branches: ["**"]

jobs:
  model-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Java
        uses: actions/setup-java@v3
        with:
          distribution: temurin
          java-version: '11'
      - name: Install TLA+ tools
        run: |
          sudo apt-get update -y
          sudo apt-get install -y tlaplus default-jre
      - name: Run TLC
        env:
          JAVA_TOOL_OPTIONS: "-XX:+UseParallelGC"
        run: |
          java -cp /usr/share/tlaplus/tla2tools.jar tlc2.TLC -deadlock -cleanup -workers 4 verification/TicketLock.tla -config verification/TicketLock.cfg
